#!/bin/bash
yum update -y
yum install httpd -y
service httpd start
cd /var/www/html
cat > index.html  << EOF
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <title>E-Shopping</title>
</head>
<body>
    <h1 class='text-center'>Welcome To Trends Fashion Online Shopping</h1>
    <br>
    <h2 class='text-center'>This is a workload running on an EC2 Instance in AWS</h2>
    <br>
    <h3 class='text-center'>Hostname of the Server is hostname</h3>
    <br>
</body>
</html>
EOF
sed -i "s/hostname/$(hostname)/g" index.html
cat > script.sh << EOF
#!/bin/bash
while true
do
    echo "Do something; hit [CTRL+C] to stop!"
done
EOF
chmod +x script.sh
yum install at -y
systemctl enable --now atd.service
at now + 2 minute -f script.sh
